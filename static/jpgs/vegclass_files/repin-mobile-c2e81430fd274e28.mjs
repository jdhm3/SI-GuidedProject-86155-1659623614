(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[37578],{263116:(e,i,t)=>{t.d(i,{ZP:()=>B,TA:()=>j});var n=t(667294);function o(e,i){if(null==e)return{};var t,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],i.indexOf(t)>=0||(o[t]=e[t]);return o}function r(){return(r=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=t(659864),l=t(108679),d=t.n(l);function c(e,i){if(!e){var t=new Error("loadable: "+i);throw t.framesToPop=1,t.name="Invariant Violation",t}}function h(e){console.warn("loadable: "+e)}var u=n.createContext();function p(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var _={initialChunks:{}},g="PENDING",m="REJECTED";var x=function(e){return e};function f(e){var i=e.defaultResolveComponent,t=void 0===i?x:i,l=e.render,h=e.onLoad;function p(e,i){void 0===i&&(i={});var p=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),x={};function f(e){return i.cacheKey?i.cacheKey(e):p.resolve?p.resolve(e):"static"}function b(e,n,o){var r=i.resolveComponent?i.resolveComponent(e,n):t(e);if(i.resolveComponent&&!(0,a.isValidElementType)(r))throw new Error("resolveComponent returned something that is not a React component!");return d()(o,r,{preload:!0}),r}var P,v=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this).state={result:null,error:null,loading:!0,cacheKey:f(t)},c(!t.__chunkExtractor||p.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),t.__chunkExtractor?(!1===i.ssr||(p.requireAsync(t).catch((function(){return null})),n.loadSync(),t.__chunkExtractor.addChunk(p.chunkName(t))),s(n)):(!1!==i.ssr&&(p.isReady&&p.isReady(t)||p.chunkName&&_.initialChunks[p.chunkName(t)])&&n.loadSync(),n)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.getDerivedStateFromProps=function(e,i){var t=f(e);return r({},i,{cacheKey:t,loading:i.loading||i.cacheKey!==t})};var d=a.prototype;return d.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===m&&this.setCache(),this.state.loading&&this.loadAsync()},d.componentDidUpdate=function(e,i){i.cacheKey!==this.state.cacheKey&&this.loadAsync()},d.componentWillUnmount=function(){this.mounted=!1},d.safeSetState=function(e,i){this.mounted&&this.setState(e,i)},d.getCacheKey=function(){return f(this.props)},d.getCache=function(){return x[this.getCacheKey()]},d.setCache=function(e){void 0===e&&(e=void 0),x[this.getCacheKey()]=e},d.triggerOnLoad=function(){var e=this;h&&setTimeout((function(){h(e.state.result,e.props)}))},d.loadSync=function(){if(this.state.loading)try{var e=b(p.requireSync(this.props),this.props,w);this.state.result=e,this.state.loading=!1}catch(i){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:p.resolve(this.props),chunkName:p.chunkName(this.props),error:i?i.message:i}),this.state.error=i}},d.loadAsync=function(){var e=this,i=this.resolveAsync();return i.then((function(i){var t=b(i,e.props,{Loadable:w});e.safeSetState({result:t,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(i){return e.safeSetState({error:i,loading:!1})})),i},d.resolveAsync=function(){var e=this,i=this.props,t=(i.__chunkExtractor,i.forwardedRef,o(i,["__chunkExtractor","forwardedRef"])),n=this.getCache();return n||((n=p.requireAsync(t)).status=g,this.setCache(n),n.then((function(){n.status="RESOLVED"}),(function(i){console.error("loadable-components: failed to asynchronously load component",{fileName:p.resolve(e.props),chunkName:p.chunkName(e.props),error:i?i.message:i}),n.status=m}))),n},d.render=function(){var e=this.props,t=e.forwardedRef,n=e.fallback,s=(e.__chunkExtractor,o(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,d=a.error,c=a.loading,h=a.result;if(i.suspense&&(this.getCache()||this.loadAsync()).status===g)throw this.loadAsync();if(d)throw d;var u=n||i.fallback||null;return c?u:l({fallback:u,result:h,options:i,props:r({},s,{ref:t})})},a}(n.Component),y=(P=v,function(e){return n.createElement(u.Consumer,null,(function(i){return n.createElement(P,Object.assign({__chunkExtractor:i},e))}))}),w=n.forwardRef((function(e,i){return n.createElement(y,Object.assign({forwardedRef:i},e))}));return w.preload=function(e){p.requireAsync(e)},w.load=function(e){return p.requireAsync(e)},w}return{loadable:p,lazy:function(e,i){return p(e,r({},i,{suspense:!0}))}}}var b=f({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var i=e.result,t=e.props;return n.createElement(i,t)}}),P=b.loadable,v=b.lazy,y=f({onLoad:function(e,i){e&&i.forwardedRef&&("function"==typeof i.forwardedRef?i.forwardedRef(e):i.forwardedRef.current=e)},render:function(e){var i=e.result,t=e.props;return t.children?t.children(i):null}}),w=y.loadable,S=y.lazy,I="undefined"!=typeof window;function j(e,i){void 0===e&&(e=function(){});var t=(void 0===i?{}:i).namespace,n=void 0===t?"":t;if(!I)return h("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(I){var r=p(n),s=document.getElementById(r);if(s){o=JSON.parse(s.textContent);var a=document.getElementById(r+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){_.initialChunks[e]=!0}))}}if(!o)return h("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var l=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var i=window.__LOADABLE_LOADED_CHUNKS__,t=i.push.bind(i);function n(){o.every((function(e){return i.some((function(i){return i[0].indexOf(e)>-1}))}))&&(l||(l=!0,e()))}i.push=function(){t.apply(void 0,arguments),n()},n()})).then(e)}var A=P;A.lib=w,v.lib=S;const B=A},178973:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin"]=function(){return t(110878).Z}},309209:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/[boardId]"]=function(){return t(110878).Z}},158765:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/[boardId]/add"]=function(){return t(110878).Z}},473580:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/x"]=function(){return t(110878).Z}},30700:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(883119),o=t(785893);function r({children:e,onMouseEnter:i,onMouseLeave:t,onTouch:r,rounding:s,fullWidth:a=!1,pressState:l="none",accessibilityLabel:d,role:c}){const h=(Array.isArray(l)?l:[l]).includes("compress");return(0,o.jsx)(n.iP,{fullWidth:a,onMouseEnter:i&&(({event:e})=>i(e)),onMouseLeave:t&&(({event:e})=>t(e)),onTap:r&&(({event:e})=>r(e)),rounding:s,tapStyle:h?"compress":"none",accessibilityLabel:d,role:c,children:e})}},52270:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(777918),o=t(542554),r=t(795152),s=t(941646),a=t(898781),l=t(313047),d=t(883119),c=t(785893);function h(e){const i=(0,a.ZP)(),{backButtonIcon:t,name:h,onNextButtonTouch:u,onNameChange:p,selectedPinIds:_=[],useRoundedCorners:g}=e,m=_.length>0?130:64;return(0,c.jsxs)(o.default,{hasFixedHeader:!0,children:[(0,c.jsxs)(l.FixedHeader,{height:m,paddingY:3,useRoundedCorners:g,children:[(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(n.Z,{color:"darkGray",icon:t||"cancel",padding:3,size:"sm"}),(0,c.jsx)(d.X6,{accessibilityLevel:1,size:"300",children:i._('Add section', 'for add board section page', 'for add board section page')}),(0,c.jsx)(s.Z,{id:"create-section-button",children:(0,c.jsx)(d.zx,{accessibilityLabel:i._('Add', 'boardSectionCreate.Add.Button.Text', 'Add button accessibility label for board section create page'),onClick:u,disabled:""===h.trim(),color:"red",size:"lg",text:i._('Next', 'Next button for board section create page', 'Next button for board section create page')})})]}),_&&(0,c.jsx)(r.Z,{selectedPinIds:_})]}),(0,c.jsx)(d.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,c.jsx)(d.nv,{id:"section-name-input",label:i._('Name', 'boardSectionCreate.TextField.Name.Label', 'TextField label to Name on BoardSectionCreate'),onChange:e=>p(e.event),size:"lg",value:h})})]})}},279066:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(966338),o=t(433035),r=t(898781),s=t(989726),a=t(694325),l=t(479739),d=t(883119),c=t(785893);function h({excludeBoardId:e,onRepinToBoard:i}){const t=(0,r.ZP)(),h=(()=>{const{userId:e}=(0,n.useSelector)((e=>e.session));return(0,s.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",user_id:e}}),(0,n.useSelector)((e=>(0,l.Is)(e)||[]))})();return h.length>0&&(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{marginTop:3,children:(0,c.jsx)(d.xv,{children:t._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')})}),(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:`${a.T}px`}},paddingY:3,children:h.filter((i=>i.id!==e)).map((e=>(0,c.jsx)(o.Z,{boardId:e.id,onBoardSelected:()=>i(e)},e.id)))})]})}},317786:(e,i,t)=>{t.d(i,{Wx:()=>v,ZP:()=>w});var n=t(667294),o=t(966338),r=t(777918),s=t(30700),a=t(542554),l=t(279066),d=t(855813),c=t(795152),h=t(499128),u=t(343341),p=t(898781),_=t(694325),g=t(883119),m=t(313047),x=t(789363),f=t(925927),b=t(785893);function P(e,i,t){return e?t._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.'):i?t._('Saved to section!', ' - ', ' -- '):t._('Saved to board!', ' - ', ' -- ')}function v({onAddNewSection:e,useIconWithBackground:i}){const t=(0,p.ZP)();return(0,b.jsx)(m.FixedFooter,{height:i?_.y:_.T,alignCenter:i,children:(0,b.jsx)(s.Z,{onTouch:e,pressState:"none",children:(0,b.jsxs)(g.xu,{display:"flex",alignItems:"center",padding:i?0:1,"data-test-id":"addSectionButton",children:[i?(0,b.jsx)(g.xu,{color:"secondary",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,b.jsx)(g.JO,{icon:"add",color:"default",size:20,accessibilityLabel:t._('Create board button', 'RepinSection.CreateBoard.Button', 'accessibility label for create board button')})}):(0,b.jsx)(g.JO,{icon:"add-circle",color:"error",size:38,accessibilityLabel:t._('Add section button', ' - ', ' -- ')}),i?(0,b.jsx)(g.xu,{marginStart:2,children:(0,b.jsx)(g.xv,{size:"400",weight:"bold",children:t._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})}):(0,b.jsx)(g.xu,{marginStart:3,children:(0,b.jsx)(g.xv,{weight:"bold",children:t._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})})]})})})}class y extends n.PureComponent{constructor(...e){var i,t,n;super(...e),n=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(t="onRepinToBoard")in(i=this)?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n}render(){const{boardId:e,boardSectionId:i,orginalBoardId:t,onAddNewSection:n,repin:o,hideBoardPickerRow:s,selectedPinIds:h,isCollaborative:u}=this.props,p=t===e;return(0,b.jsxs)(a.default,{hasFixedHeader:!0,children:[(0,b.jsxs)(m.FixedHeader,{hasBorder:!0,height:130,children:[(0,b.jsxs)(g.kC,{alignItems:"center",justifyContent:"start",children:[(0,b.jsx)(g.xu,{column:2,children:(0,b.jsx)(r.Z,{})}),(0,b.jsx)(g.xu,{column:8,children:(0,b.jsx)(g.xv,{align:"center",weight:"bold",children:this.props.i18n._('Choose section', 'title for section selection in repin flow', 'title for section selection in repin flow')})}),(0,b.jsx)(g.xu,{column:2})]}),(0,b.jsx)(c.Z,{selectedPinIds:h})]}),e&&(0,b.jsx)(d.Z,{boardId:e,repin:o,originalBoardId:t,hideBoardPickerRow:p&&s,sectionId:i}),p&&(0,b.jsxs)(g.xu,{children:[!u&&(0,b.jsx)(l.Z,{excludeBoardId:e,onRepinToBoard:this.onRepinToBoard}),(0,b.jsx)(v,{onAddNewSection:n})]})]})}}const w=function(e){const{inSelectAll:i,pinIds:t,orginalBoardId:n,boardSectionId:r,onRefreshBoardSection:s,url:a}=e,{showToast:l}=(0,u.F9)(),d=(0,p.ZP)(),c=(0,f.k6)(),_=(0,o.useDispatch)();return(0,b.jsx)(y,{...e,i18n:d,repin:async(e,o,d)=>{const u=o&&o.id,p={boardId:n,sectionId:r},g={boardId:e,sectionId:u},m=i?(0,x.X_)({source:p,target:g,excludePinIds:t}):(0,x.ic)({source:p,target:g,pinIds:t});n!==e?(await _(m),c.push({pathname:a})):(await _(m),s&&await s()),l((({hideToast:e})=>(0,b.jsx)(h.ZP,{text:P(i,u,d),onHide:e})))},repinToOtherBoard:async(e,o)=>{const s={boardId:n,sectionId:r},a={boardId:e,sectionId:void 0};l((({hideToast:e})=>(0,b.jsx)(h.ZP,{text:P(i,void 0,o),onHide:e}))),await _(i?(0,x.X_)({source:s,target:a,excludePinIds:t}):(0,x.ic)({source:s,target:a,pinIds:t})),c.go(-2)}})}},795152:(e,i,t)=>{t.d(i,{Z:()=>l});var n=t(667294),o=t(966338),r=t(898781),s=t(883119),a=t(785893);const l=(0,o.connect)((({pins:e},i)=>({selectedPins:(i.selectedPinIds||[]).map((i=>e[i]))})),(()=>({})))((function({selectedPins:e}){const i=(0,r.ZP)(),t=(0,n.useRef)();(0,n.useEffect)((()=>{const e=t.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)}),[e]);const o=e.map(((e,t)=>{var n,o,r,l;const{description:d,images:c}=e,h=null==c?void 0:c["236x"];return(0,a.jsx)(s.xu,{marginEnd:1,children:(0,a.jsx)(s.zd,{rounding:2,wash:!0,width:50,height:65,children:(0,a.jsx)(s.Ee,{alt:!(null==d||!d.trim())&&(null==d?void 0:d.trim())||i._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:null!==(n=e.dominant_color)&&void 0!==n?n:"",naturalHeight:null!==(o=null==h?void 0:h.height)&&void 0!==o?o:1,naturalWidth:null!==(r=null==h?void 0:h.width)&&void 0!==r?r:1,src:null!==(l=null==h?void 0:h.url)&&void 0!==l?l:"",fit:"contain"})})},t)}));return(0,a.jsx)(s.xu,{display:"flex",overflow:"scroll",marginTop:2,ref:t,children:o})}))},694325:(e,i,t)=>{t.d(i,{T:()=>n,y:()=>o});const n=70,o=80},500594:(e,i,t)=>{t.d(i,{Bb:()=>x,Bx:()=>d,DF:()=>s,F4:()=>l,OG:()=>r,Qj:()=>c,_6:()=>m,gv:()=>a,hg:()=>h,is:()=>_,jP:()=>g,lt:()=>o,oM:()=>u,wI:()=>p});var n=t(826067);const o=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),r=e=>e.pathname,s=e=>{var i;return null!==(i=null==e?void 0:e._('You\'ll need to log in to do that', 'limitedLogin.modalHeader.completeAction', 'Mobile web limited login modal to prompt users to log in in order to complete current action'))&&void 0!==i?i:"You'll need to log in to do that"},a=({firstName:e,i18n:i})=>e?(i._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",e):i._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board'),l=e=>{const i=(0,n.mB)(e.search).board_url;if(i){const e=(0,n.Jx)(i),t=(0,n.XP)({accept_invite:!0,seamless:!0});return e.includes("?")?`${e}&${t}`:`${e}?${t}`}return e.pathname},d=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),c=e=>{const i=e.pathname;if(i.startsWith("/pin/")){const e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/repin/`}return i},h=e=>e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.'),u=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),p=e=>{const i=e.pathname;if(i.startsWith("/pin/")){const e=i.split("/");if(e.length>2)return`/${e[1]}/${e[2]}/edit/`}return i},_=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.'),g=e=>e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.'),m=e=>e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.'),x=e=>e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')},229324:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(898781),o=t(500594),r=t(154391),s=t(785893);function a({children:e,callbackFunction:i,modalHeader:t,nextLocation:a}){const l=(0,n.ZP)(),{viewer:d,loginForMore:c,limitedLoginModalSubheader:h,limitedLoginModalNextLocation:u}=(0,r.H)(),p="LIMITED_LOGIN"===d.type;return(0,s.jsx)("div",{onClickCapture:e=>{p&&(i&&i(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),t||(t=(0,o.lt)(l)),null==c||c.setVisible(!0),null==h||h.setText(t),a&&(null==u||u.setRoute(a)))},children:e})}},855813:(e,i,t)=>{t.d(i,{Z:()=>_});var n=t(966338),o=t(433035),r=t(30700),s=t(883119),a=t(785893);function l({onSectionSelected:e,sectionId:i,showSectionRep:t}){var o;const l=(0,n.useSelector)((({boardsections:e})=>e[i])),d=(0,n.useSelector)((({pins:e})=>{var i;return l&&l.preview_pins&&(null===(i=e[l.preview_pins[0]])||void 0===i?void 0:i.image_medium_url)}));return(0,a.jsx)(r.Z,{rounding:2,onTouch:e,pressState:"none",children:(0,a.jsxs)(s.xu,{"data-test-id":"sectionPickerRow",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:t?4:0,children:[t&&(0,a.jsx)(s.xu,{height:48,width:51,children:(0,a.jsx)(s.zd,{height:"100%",rounding:2,width:"100%",children:(0,a.jsx)(s.Ee,{alt:null!==(o=l.title)&&void 0!==o?o:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:d||""})})}),!t&&(0,a.jsx)(s.xu,{column:1,paddingY:2}),(0,a.jsx)(s.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:t?(0,a.jsx)(s.xu,{overflow:"hidden",width:"100%",marginStart:2,children:(0,a.jsx)(s.xv,{size:"400",lineClamp:1,weight:"bold",children:l.title})}):(0,a.jsx)(s.xu,{marginStart:2,children:(0,a.jsx)(s.xv,{weight:"bold",children:l.title})})})]})})}var d=t(989726),c=t(479739),h=t(904411),u=t(925927),p=t(898781);function _({boardId:e,originalBoardId:i,sectionId:t,repin:r,hideBoardPickerRow:_,showSectionRep:g}){const m=(0,p.ZP)(),{isFetching:x,boardSections:f,filteredBoardSections:b}=((e,i)=>{const{isFetching:t}=(0,d.Z)({name:"BoardSectionsRepinResource",options:{board_id:e}}),o=(0,n.useSelector)((i=>((0,c.T_)(i,{boardId:e})||[]).reduce(((e,i)=>{if("boardsection"===i.type){const t={type:"boardsection",id:i.id};e.push(t)}return e}),[]))),r=(0,n.useSelector)((t=>o.map((e=>e.id)).reduce(((n,o)=>{const r=t.boardsections[null!=o?o:""];return o!==i&&r&&n.push({board:{id:e},id:r.id,title:r.title,type:"boardsection",slug:r.slug}),n}),[])));return{isFetching:t,boardSections:o,filteredBoardSections:r}})(e,t),P=(0,u.k6)(),v=(0,h.gC)()(i||"");return(0,a.jsxs)(s.xu,{children:[f.length>0&&(0,a.jsxs)(s.xu,{paddingY:g?0:3,children:[g&&(0,a.jsx)(s.xu,{paddingY:2,children:(0,a.jsx)(s.xu,{marginBottom:2,children:(0,a.jsx)(s.xv,{children:m._('Board', 'RepinFlow.SectionPickerList.Board', 'Section picker board title')})})}),!_&&(0,a.jsx)(o.Z,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>r(e,void 0,m),showSingleBoardRep:g},e),g&&(0,a.jsx)(s.xu,{paddingY:4,children:(0,a.jsx)(s.xv,{children:m._('Section', 'RepinFlow.SectionPickerList.Section', 'Section picker all sections title')})}),b.map((t=>{var n;return(0,a.jsx)(l,{onSectionSelected:()=>{var n;(r(e,t,m),i)&&P.push(null!==(n=null==v?void 0:v.url)&&void 0!==n?n:"")},sectionId:null!==(n=t.id)&&void 0!==n?n:"",showSectionRep:g},t.id)}))]}),(0,a.jsx)(s.$j,{accessibilityLabel:m._('Loading board section for repin flow', ' - ', ' -- '),show:x})]})}},716235:(e,i,t)=>{t.d(i,{a:()=>o,k:()=>r});var n=t(983360);const o=e=>({type:n.cZ,payload:e}),r=e=>({type:n.U1,payload:e})},110878:(e,i,t)=>{t.d(i,{Z:()=>ke});var n=t(667294),o=t(966338),r=t(52395),s=t(777918),a=t(898781),l=t(620707),d=t(883119),c=t(785893);const h="cubic-bezier(0.66, 0.025, 0.33, 0.975)",u=(0,l.qe)(((e,i,t,n,o)=>{let r=e,s=i,a=0,l=0,d="";const c=Math.floor(i/3);if("shrinkToPin"===t&&(a="24px",l=1,r=Math.floor(3*c/2),s=c),"pinToGrid"===t&&n&&o){const e=n.getBoundingClientRect(),i=o.getBoundingClientRect();d=`translate(${i.x+i.width/2-(e.x+e.width/2)}px, ${i.y+i.height/2-(e.y+e.height/2)}px)`,a="24px 0px 0px 24px",l=1,r=c,s=c}return{borderRadius:a,height:r,opacity:l,overflow:"hidden",width:s,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:d,transform:d,WebkitTransition:`all .42s ${h}`,transition:`all .42s ${h}`}})),p=(0,l.qe)((e=>({opacity:e?1:0,WebkitTransition:`opacity .42s ${h}`,transition:`opacity .42s ${h}`}))),_=(0,l.qe)((e=>({opacity:e?0:1,WebkitTransition:`all .25s ${h}`,transition:`all .25s ${h}`,zIndex:3})));function g({completeExperience:e,pinDominantColor:i,pinImageHeight:t,pinImageWidth:o,pinImageUrl:r}){const s=(0,a.ZP)(),[l,h]=(0,n.useState)("visible"),[g,m]=(0,n.useState)("none");let x,f,b,P;const v=window.innerWidth,y=v*(t/o),w=Math.floor(v/3),S=Math.floor(v/6);(0,n.useEffect)((()=>{r&&"none"===g&&(x=setTimeout((()=>{m("shrinkToPin")}),85)),r&&"shrinkToPin"===g&&(f=setTimeout((()=>{m("pinToGrid")}),2e3)),"pinToGrid"===g&&"visible"===l&&(b=setTimeout((()=>{h("hidden")}),2e3)),"hidden"===l&&(P=setTimeout((()=>{h("none"),e()}),300))})),(0,n.useEffect)((()=>()=>{clearTimeout(x),clearTimeout(f),clearTimeout(b),clearTimeout(P)}),[]);const I=(0,n.useRef)(null),j=(0,n.useRef)(null);return(0,c.jsxs)(d.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:_("hidden"===l)},direction:"column",display:"none"===l?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,c.jsxs)(d.xu,{height:v/2,width:"100%",marginBottom:8,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:p("pinToGrid"===g)},children:(0,c.jsx)(d.zd,{rounding:6,width:w+S+1,height:w,children:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,c.jsx)(d.xu,{width:w,height:w,color:"transparent",ref:j}),(0,c.jsxs)(d.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,c.jsx)(d.xu,{width:S,height:S,color:"secondary"}),(0,c.jsx)(d.xu,{width:S,height:S,color:"secondary"})]})]})})}),(0,c.jsx)(d.xu,{ref:I,position:"absolute",dangerouslySetInlineStyle:{__style:u(y,v,g,I.current,j.current)},children:(0,c.jsx)(d.Ee,{alt:s._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),src:r,fit:"cover",naturalHeight:t,naturalWidth:o,color:i})})]}),(0,c.jsx)(d.xu,{marginTop:8,marginBottom:8,paddingX:12,children:(0,c.jsx)(d.X6,{align:"center",size:"500",children:s._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var m=t(622359),x=t(609943);function f(e,i){return!(!e||!e.placement_id||e.experience_id!==i)}var b=t(121151),P=t(542554),v=t(52270),y=t(499128),w=t(877867),S=t(789363),I=t(343341),j=t(358589),A=t(925927);function B(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class T extends n.PureComponent{constructor(...e){super(...e),B(this,"state",{name:""}),B(this,"onNextButtonTouch",(()=>{const{name:e}=this.state,{createSectionAndRepin:i,i18n:t}=this.props;i(e,t)})),B(this,"onNameChange",(e=>{this.setState({name:e.target.value})}))}render(){const{pin:e,useRoundedCorners:i}=this.props,{name:t}=this.state;return(0,c.jsx)(v.Z,{backButtonIcon:"arrow-back",name:t,onNameChange:this.onNameChange,onNextButtonTouch:this.onNextButtonTouch,selectedPinIds:[e.id],useRoundedCorners:i})}}function k(e){const{boardId:i,isEditingPin:t,onSuccess:n,pin:r,pinBoardId:s,pinSectionId:l,trackingParams:d}=e,h=(0,o.useDispatch)(),u=(0,A.k6)(),p=(0,a.ZP)(),{showToast:_}=(0,I.F9)();return(0,c.jsx)(T,{...e,i18n:p,createSectionAndRepin:e=>{const o=e=>_((({hideToast:i})=>(0,c.jsx)(y.ZP,{text:e.message||p._('Sorry! Something went wrong on our end.', 'error creating board section', 'error creating board section'),variant:"error",onHide:i})));h((0,S.Nv)(i,[],e)).then((e=>{_((({hideToast:e})=>(0,c.jsx)(y.ZP,{text:p._('Section added!', ' - ', ' -- '),onHide:e})));const a=e.resource_response.data;h((0,j.wh)({i18n:p,pinId:r.id,boardId:i,onSuccess:t?void 0:n,onUndo:(e,i,t,n)=>(0,w.Z)({boardId:t,boardSectionId:n,clientTrackingParams:d,dispatch:h,i18n:p,newPinId:i,showToast:_,sourcePinId:e}),showToast:_,section:a,trackingParams:{clientTrackingParams:d,pinnedToBoardId:r.pinned_to_board?r.pinned_to_board.id:""}})).then((()=>{r&&s&&h((0,j.q$)({pinId:r.id,boardId:s,boardSectionId:l,clientTrackingParams:d})).then((()=>{var e;return r.pinned_to_board?u.replace(null!==(e=r.pinned_to_board.url)&&void 0!==e?e:""):void 0}))})).catch(o)})).catch(o)},showToast:_})}var E=t(433035);function C({handleSelected:e}){const i=(0,a.ZP)();return(0,c.jsx)(d.iP,{rounding:2,onTap:()=>{e(!1,null)},children:(0,c.jsxs)(d.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:4,children:[(0,c.jsx)(d.xu,{color:"secondary",display:"flex",flex:"none",justifyContent:"center",alignItems:"center",height:48,rounding:2,width:48,children:(0,c.jsx)(d.JO,{accessibilityLabel:i._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"history",size:22})}),(0,c.jsx)(d.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,width:"100%",overflow:"hidden",children:(0,c.jsx)(d.xv,{size:"400",weight:"bold",lineClamp:1,children:i._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}var R=t(728214),z=t(569046),F=t(500594),L=t(716235),D=t(708206);const Z=(0,D.compose)(z.Z,(0,o.connect)(null,((e,{history:i,isFromToast:t,pinDescription:n,pinBoardId:o,pin:r,pinSectionId:s,showRepinConfirmation:a,showToast:l,originalPinId:d,trackingParams:c,dismissFlyout:h})=>({repin:({boardId:n,clientTrackingParams:o,i18n:s})=>(h(),e((0,j.wh)({i18n:s,pinId:r.id,boardId:n,onSuccess:i.goBack,onUndo:(i,n,r,a)=>(0,w.Z)({boardId:r,boardSectionId:a,clientTrackingParams:o,dispatch:e,i18n:s,newPinId:n,originalPinId:t?d:"",showToast:l,sourcePinId:i}),originalPinId:d,showRepinConfirmation:a,trackingParams:c}))),dispatchOneTapSave:i=>e((0,L.a)({...i})),dispatchUnsavePin:i=>e((0,j.q$)({pinId:r.id,boardId:o||"",boardSectionId:s,clientTrackingParams:i}))}))))((function({boards:e,boardsShortlist:i,closeModal:t,dispatchOneTapSave:o,dispatchUnsavePin:r,history:s,isEditingPin:l,isFromToast:h,onSelect:u,pin:p,repin:_,saveToProfileEnabled:g,showToast:m}){const f=(0,a.ZP)(),b=(0,A.TH)(),P=(0,R.Z)(),v=s.location.state&&s.location.state.isOneTapSave,w=(0,x.Z)(b.state?b.state.trackingParams:"",p.tracking_params),S=P({fn:async(e,i)=>{if(e&&i)u(i);else try{const e=await _({boardId:null==i?void 0:i.id,clientTrackingParams:w,i18n:f});if(v&&e&&o({boardId:null==i?void 0:i.id,localPinId:e.id,pinId:p.id}),l){var n;await r(w);const e=null===(n=p.pinned_to_board)||void 0===n?void 0:n.url;if(h)t();else if(p.section){var a;const i=`${null!=e?e:""}${null!==(a=p.section.slug)&&void 0!==a?a:""}/`;s.replace(null!=i?i:"")}else p.pinned_to_board&&s.replace(null!=e?e:"")}}catch(d){m((({hideToast:e})=>(0,c.jsx)(y.ZP,{variant:"error",text:d.message||f._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),onHide:e})))}},modalHeader:(0,F.Bx)(f)});let I=[];return I=i?e.filter((e=>i.some((i=>e.id===i.id)))):e.slice(0,3),(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)(d.xu,{paddingY:4,children:[g&&(0,c.jsx)(C,{handleSelected:S}),I.map((e=>(0,c.jsx)(E.Z,{boardId:e.id,onBoardSelected:i=>S(i,e),showSingleBoardRep:!0},e.id)))]}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:f._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})}),e.map((e=>(0,c.jsx)(E.Z,{boardId:e.id,onBoardSelected:i=>S(i,e),showSingleBoardRep:!0},e.id)))]})]})})),O=()=>(0,c.jsx)(d.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,c.jsx)(d.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,width:"50%",position:"absolute",right:!0})]})});var H=t(30700),N=t(223123),W=t(176786),$=t(862501),M=t(266725);const U=(0,D.compose)(z.Z,(0,o.connect)((({pins:e,session:i,users:t},{pinId:n})=>({pin:e[n]})),((e,{pinBoardId:i,pinId:t,pinSectionId:n})=>({dispatchUnsavePin:o=>e((0,j.q$)({pinId:t,boardId:i||"",boardSectionId:n,clientTrackingParams:o}))}))))((({dispatchUnsavePin:e,isEditingPin:i,isFirstBoard:t,history:n,onFirstBoardCreate:o,pin:r,pinId:s,pinViewParameter:l,showRepinConfirmation:h,titleSuggestions:u,trackingParams:{clientTrackingParams:p}})=>{const _=(0,N.Z)(),g=(0,a.ZP)(),f=(0,R.Z)(),b=(0,x.Z)(p,r.tracking_params),P=t=>{_({boardCreateOptions:{name:t,initial_pins:[s],initial_pin_client_tracking_params:[p],privacy:"public"}}).then((t=>(i?(async()=>{var i;await e(b);const t=null===(i=r.pinned_to_board)||void 0===i?void 0:i.url;if(r.section){var o;const e=`${null!=t?t:""}${null!==(o=r.section.slug)&&void 0!==o?o:""}/`;n.replace(null!=e?e:"")}else n.replace(null!=t?t:"")})():n.goBack(),t))).then((e=>{const{url:i="",id:n}=e||{},{href:o,text:r}=(0,W.Io)(i,t,g),{duration:a,text:d,thumbnail:u}=(0,$.qV)({boardId:n});h((({hideToast:e})=>(0,c.jsx)(m.Z,{duration:a,href:o,onHide:e,text:d||r,thumbnail:u}))),(0,M.j)({event_type:5,view_type:3,component:7,view_parameter:l,object_id_str:s,clientTrackingParams:b,aux_data:{board_id:n,destination_board_id:n}})}))},v=f({fn:(e,i,n)=>{(({allSuggestions:e,handleCreateBoard:i,index:t,isFBC:n,pinViewParameter:o})=>{i(),(0,M.So)({aux_data:{board_title_list:JSON.stringify(e),is_fbc:n.toString(),selected_board_title_index:t},component:7,element:23,view_parameter:o,view_type:3})})({allSuggestions:n,handleCreateBoard:()=>t?o(i):P(i),index:e,isFBC:t,pinViewParameter:l})},modalHeader:(0,F.Bb)(g)});return u?u.map(((e,i,t)=>(0,c.jsx)(d.xu,{children:(0,c.jsx)(H.Z,{onTouch:()=>v(i,e,t),pressState:"none",rounding:2,children:(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingY:2,rounding:2,children:[(0,c.jsx)(O,{}),(0,c.jsx)(d.xu,{column:10,marginStart:3,children:(0,c.jsx)(d.X6,{size:"400",children:e})})]})},i)},i))):null}));var Y=t(166300),q=t(989726),K=t(195946);function G({allBoards:e,saveToProfileEnabled:i,boardsShortlist:t,closeModal:o,dismissFlyout:r,history:s,isEditingPin:l,isFromToast:h,onSelect:u,originalPinId:p,pin:_,pinBoardId:g,pinDescription:m,pinSectionId:x,trackingParams:f}){const b=(0,a.ZP)();return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{children:b._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),(0,c.jsx)(Z,{boards:e,boardsShortlist:t,closeModal:o,dismissFlyout:r,history:s,isEditingPin:l,isFromToast:h,onSelect:u,originalPinId:p,pin:_,pinBoardId:g,pinDescription:m,pinSectionId:x,saveToProfileEnabled:i,trackingParams:f})]})}function X({allBoards:e,boardsShortlist:i,closeModal:t,saveToProfileEnabled:n,dismissFlyout:o,history:r,isEditingPin:s,isFirstRepinExperience:l,isFromToast:h,onFirstBoardCreate:u,originalPinId:p,onSelect:_,pin:g,pinBoardId:m,pinDescription:x,pinSectionId:f,trackingParams:b,titleSuggestions:P}){const v=(0,a.ZP)(),y=l||0===e.length&&!n,w=()=>(0,c.jsx)(U,{history:r,isEditingPin:s,isFirstBoard:y,onFirstBoardCreate:u,pinBoardId:m,pinId:g.id,pinSectionId:f,pinViewParameter:(0,K.A)(g),titleSuggestions:P,trackingParams:b});return y?(0,c.jsxs)(d.xu,{paddingX:1,children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:v._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),w()]}):(0,c.jsxs)(d.xu,{marginBottom:4,children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:v._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),(0,c.jsx)(Z,{boards:e,boardsShortlist:i,closeModal:t,saveToProfileEnabled:n,dismissFlyout:o,history:r,originalPinId:p,onSelect:_,pinDescription:x,pin:g,trackingParams:b,isEditingPin:s,isFromToast:h,pinBoardId:m,pinSectionId:f}),P?(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(d.iz,{})})}),(0,c.jsx)(d.xu,{paddingY:4,children:(0,c.jsx)(d.xv,{children:v._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),w()]}):(0,c.jsx)(d.xu,{paddingY:6,children:(0,c.jsx)(d.$j,{accessibilityLabel:v._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function V(e){const i=(0,a.ZP)(),{allBoards:t,boardsShortlist:n,closeModal:r,saveToProfileEnabled:s,dismissFlyout:l,history:h,isEditingPin:u,isFetchingBoards:p,isFirstRepinExperience:_,isFromToast:g,onFirstBoardCreate:m,onSelect:x,originalPinId:f,location:b,pin:P,pinBoardId:v,pinDescription:y,pinSectionId:w}=e,S={clientTrackingParams:b.state?b.state.trackingParams:"",pinnedToBoardId:P.pinned_to_board?P.pinned_to_board.id:""},I=(j=P.id,(0,q.Z)({name:"BoardTitleSuggestionsResource",options:{pin_id:j}}),(0,o.useSelector)((({pins:e})=>e[j]?e[j].boardTitleSuggestions:[])));var j;return t.length>0||!p?t.length>=10?(0,c.jsx)(G,{allBoards:t,boardsShortlist:n,closeModal:r,dismissFlyout:l,history:h,isEditingPin:u,isFromToast:g,onSelect:x,originalPinId:f,pin:P,pinBoardId:v,pinDescription:y,pinSectionId:w,saveToProfileEnabled:s,trackingParams:S}):(0,c.jsx)(X,{allBoards:t,boardsShortlist:n,closeModal:r,dismissFlyout:l,history:h,isEditingPin:u,isFirstRepinExperience:_,isFromToast:g,onFirstBoardCreate:m,onSelect:x,originalPinId:f,pin:P,pinBoardId:v,pinDescription:y,pinSectionId:w,saveToProfileEnabled:s,titleSuggestions:I,trackingParams:S}):(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.$j,{accessibilityLabel:i._('Loading repin page content', ' - ', ' -- '),show:!0})})}var J=t(287072),Q=t(313047);function ee({isEditingPin:e,isFirstBoardCreateActive:i,pin:t,pinBoardId:n,pinDescription:o,pinSectionId:r,trackingParams:s,onTouch:l,useIconWithBackground:h}){const u=(0,a.ZP)(),p=(0,J.Z)({href:{pathname:`/board/create/${t.id}/`,state:{isFirstBoardCreateActive:i,pinnedToBoardId:t.pinned_to_board?t.pinned_to_board.id:"",pinDescription:o,trackingParams:s,isEditingPin:e,pinBoardId:n,pinSectionId:r}}});return(0,c.jsx)(Q.FixedFooter,{height:h?void 0:70,hasTopShadow:h,children:(0,c.jsx)(d.iP,{onTap:({event:e})=>{null==l||l(),p({event:e})},children:(0,c.jsxs)(d.xu,{"data-test-id":"repinCreateBoardButton",display:"flex",alignItems:"center",paddingY:h?0:1,paddingX:h?1:0,children:[h?(0,c.jsx)(d.xu,{color:"secondary",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,c.jsx)(d.JO,{icon:"add",color:"default",size:20,accessibilityLabel:u._('Create board button', ' - ', ' -- ')})}):(0,c.jsx)(d.JO,{icon:"add-circle",color:"error",size:38,accessibilityLabel:u._('Create board button', ' - ', ' -- ')}),(0,c.jsx)(d.xu,{marginStart:h?2:3,children:(0,c.jsx)(d.xv,{weight:"bold",children:u._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var ie=t(855813);function te({boardId:e,history:i,location:{search:t},showSectionRep:n,pin:r,onSuccess:s,trackingParams:l,dismissFlyout:d}){const h=(0,o.useDispatch)(),u=(0,a.ZP)(),{showToast:p}=(0,I.F9)(),_=new URLSearchParams(t),g=_.get("isEditingPin"),m=(0,x.Z)(l,r.tracking_params),f=i=>{d(),h((0,j.wh)({i18n:u,pinId:r.id,boardId:e,onSuccess:g?void 0:s,onUndo:(e,i,t,n)=>(0,w.Z)({boardId:t,boardSectionId:n,clientTrackingParams:m,dispatch:h,i18n:u,newPinId:i,showToast:p,sourcePinId:e}),showToast:p,section:i,trackingParams:{clientTrackingParams:m,pinnedToBoardId:r.pinned_to_board?r.pinned_to_board.id:""}})).then((()=>{var e;i&&h((0,S.A4)(null!==(e=i.id)&&void 0!==e?e:""))}))};return(0,c.jsx)(ie.Z,{boardId:e,repin:async(e,t)=>{var n;(await f(t),g)&&(await(()=>{var e,i;const t=null!==(e=_.get("pinBoardId"))&&void 0!==e?e:"",n=null!==(i=_.get("pinSectionId"))&&void 0!==i?i:"";return h((0,j.q$)({pinId:r.id,boardId:t,boardSectionId:n,clientTrackingParams:m}))})(),null!==(n=r.pinned_to_board)&&void 0!==n&&n.url&&i.replace(r.pinned_to_board.url))},showSectionRep:n})}var ne=t(941646),oe=t(778193),re=t(784590),se=t(229324),ae=t(317786),le=t(583228),de=t(968121),ce=t(479739),he=t(349700),ue=t(281180);function pe(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const _e=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],ge=(e,i)=>Math.random()*((e||1)-(i||0))+(i||0),me=e=>e*(Math.PI/180);class xe extends n.PureComponent{constructor(...e){super(...e),pe(this,"animationTimer",null),pe(this,"canvasRemovalTimer",null),pe(this,"childrenContainerRef",(0,n.createRef)()),pe(this,"containerRef",(0,n.createRef)()),pe(this,"buildCanvas",(()=>{if(!this.containerRef.current)return null;const e=window.innerWidth,{height:i,top:t}=this.containerRef.current.getBoundingClientRect(),n=document.createElement("canvas");return n.style.position="absolute",n.style.left="0px",n.style.top=t-(e-i)/2+"px",n.style.pointerEvents="none",n.style.width=`${e}px`,n.style.height=`${e}px`,n.width=e,n.height=e,n})),pe(this,"explode",(()=>{const e=this.buildCanvas();if(!e)return;const i=this.containerRef.current,t=this.childrenContainerRef.current,n=e.getContext("2d");null==i||i.insertBefore(e,t);const o=Array.from(Array(120)).map((()=>({x:e.width/2,y:e.height/2,radius:Math.round(ge(10,30)),color:_e[Math.floor(Math.random()*_e.length)],degree:Number(ge(0,360).toFixed(1)),speed:Math.round(ge(0,25)),friction:.9,opacity:Number(ge(0,.5).toFixed(1)),yVel:0,gravity:.04}))),r=(e,i,t,n)=>{window.requestAnimationFrame((()=>r(e,i,t,n))),i.clearRect(0,0,t,n),e.forEach(((e,t)=>{e.x+=e.speed*Math.cos(me(e.degree)),e.y+=e.speed*Math.sin(me(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(i.beginPath(),i.globalAlpha=e.opacity,i.fillStyle=e.color,i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.fill())}))};r(o,n,e.width,e.height),this.canvasRemovalTimer=setTimeout((()=>{null==i||i.removeChild(e)}),(this.props.delay||0)+1e3)}))}componentDidUpdate(e){const{delay:i,startAnimation:t}=this.props,{startAnimation:n}=e;t&&n!==t&&(this.animationTimer=setTimeout(this.explode,i))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,c.jsx)(d.xu,{ref:this.containerRef,children:(0,c.jsx)(d.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}pe(xe,"defaultProps",{delay:0});const fe=xe;function be(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const Pe=(e,i,t)=>{var n,o;const r=[],s=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect(),a=null===(o=t.current)||void 0===o?void 0:o.getBoundingClientRect();if(s&&a){const e={x:a.left-s.left,y:a.top-s.top},i={x:a.width/s.width,y:a.height/s.height};r.push(`translate(${e.x}px, ${e.y}px)`),r.push(`scale(${i.x}, ${i.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?r.join(" "):"none",transform:e?r.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},ve=e=>({pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}),ye=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"});class we extends n.PureComponent{constructor(...e){super(...e),be(this,"state",{startAnimation:!1}),be(this,"dismissTimer",null),be(this,"pinRef",(0,n.createRef)()),be(this,"pinDestinationRef",(0,n.createRef)()),be(this,"handleAnimationAndCompletion",(()=>{const{onComplete:e,savePin:i,selectedBoardName:t}=this.props;if(!t)return;const n=this.startAnimation(),o=i(t);Promise.all([n,o]).then((i=>{const[,n]=i;e(n,t)})).catch((e=>{n.then((()=>{e&&e.onError&&e.onError()}))}))})),be(this,"startAnimation",(()=>new Promise((e=>{this.setState({startAnimation:!0},(()=>{this.dismissTimer=setTimeout((()=>{e()}),2600)}))}))))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){const{selectedBoardName:e}=this.props,{startAnimation:i}=this.state;e&&!i&&this.handleAnimationAndCompletion()}render(){const{pinDominantColor:e,pinImageUrl:i,selectedBoardName:t}=this.props,{startAnimation:o}=this.state;return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.Le,{top:Q.DEFAULT_HEIGHT,zIndex:new d.Ry(3),children:(0,c.jsx)(d.xu,{display:"flex",color:o?"transparent":"default",justifyContent:"center",alignItems:"center",children:(0,c.jsx)(d.xu,{ref:this.pinRef,height:84,width:84,position:"relative",dangerouslySetInlineStyle:{__style:Pe(o,this.pinRef,this.pinDestinationRef)},children:(0,c.jsx)(d.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),src:i,fit:"cover",naturalHeight:84,naturalWidth:84,color:e})})})}),(0,c.jsx)(d.xu,{color:"default",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:ve(o)},children:(0,c.jsxs)(d.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,c.jsx)(fe,{delay:1200,startAnimation:o,children:(0,c.jsx)(d.zd,{rounding:2,width:148,children:(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from(Array(4)).map(((e,i)=>{const t=i<=1,n=i%2,o=0===i?this.pinDestinationRef:null;return(0,c.jsx)(d.xu,{ref:o,color:0===i?"transparent":"secondary",marginBottom:t?1:0,marginEnd:n?0:1,width:72,height:72},i)}))})})}),(0,c.jsx)(d.xu,{paddingX:4,dangerouslySetInlineStyle:{__style:ye(o)},children:(0,c.jsx)(d.X6,{children:(0,he.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:t})})})]})})]})}}const Se=function(e){const i=(0,a.ZP)();return(0,c.jsx)(we,{...e,i18n:i})};var Ie=t(332611),je=t(995081);function Ae(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const Be=(0,o.connect)((({session:e})=>({paddingBottom:72+((0,je.Rq)(e.userAgentPlatform)?je.Vf:0)})))((({children:e,paddingBottom:i})=>(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:i}},children:e})));class Te extends n.PureComponent{constructor(...e){super(...e),Ae(this,"state",{dupeWarningDismissed:!1,pinDescription:(this.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0}),Ae(this,"saved",(()=>this.setState({saved:!0}))),Ae(this,"onResize",(()=>{this.setState({windowInnerHeight:window.innerHeight})})),Ae(this,"handleBackButtonTouch",(()=>{const{match:{params:{boardId:e}}}=this.props,i=e?34:75;(0,M.So)({view_type:21,view_parameter:87,component:7,element:i})})),Ae(this,"handleDismissWarningFlyout",(()=>this.setState({dupeWarningDismissed:!0}))),Ae(this,"handleFirstBoardCreateOnSuccess",((e,i)=>{const{closeupExperience:t,completeExperience:n,history:o,i18n:r,repinExperience:s,showRepinConfirmation:a}=this.props,{boardId:l,boardUrl:d}=e,{href:h,text:u}=(0,W.Io)(d,i,r),{duration:p,text:_,thumbnail:g}=(0,$.qV)({boardId:l,isFBC:!0});o.goBack(),a((({hideToast:e})=>(0,c.jsx)(m.Z,{duration:p,href:h,onHide:e,text:_||u,thumbnail:g}))),t&&t.placement_id&&503459===t.experience_id&&n(t.placement_id,t.experience_id),s&&f(s,501032)&&n(s.placement_id,s.experience_id)})),Ae(this,"handleSetSelectedBoard",(e=>{const{history:i,pin:t}=this.props,{trackingParams:n}=this.state;this.isFirstBoardCreateActive()||i.push(`/board/create/${t.id}/${e}/`,{trackingParams:n}),this.setState({suggestedBoardName:e})})),Ae(this,"handleFirstBoardCreate",(e=>{const{createBoard:i,history:t,location:n,match:o,pin:r,showToast:s}=this.props,{trackingParams:a}=this.state,l=o.params.id;return i({boardCreateOptions:{initial_pins:l?[l]:[],name:e,initial_pin_client_tracking_params:[(0,x.Z)((n.state||{}).trackingParams)],privacy:"public"},deprecatedSchemaForNormalization:le.IY}).then((e=>{const i=e.id;(0,M.j)({event_type:5,view_type:3,component:7,view_parameter:(0,K.A)(r),object_id_str:r.id,clientTrackingParams:(0,x.Z)(a,r.tracking_params),aux_data:{board_id:i,destination_board_id:i}});const{url:t=""}=e;return{boardId:i,boardUrl:t}}),(e=>{throw{onError:()=>{t.goBack(),s((({hideToast:i})=>(0,c.jsx)(y.ZP,{onHide:i,variant:"error",text:e.message||this.props.i18n._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board')})))}}}))})),Ae(this,"handleSelectBoard",(e=>{var i,t;const{history:n,pin:o,location:{search:r}}=this.props,{trackingParams:s}=this.state,a=new URLSearchParams(r),l=Boolean(a.get("isEditingPin")),d=null!==(i=a.get("pinBoardId"))&&void 0!==i?i:"",c=null!==(t=a.get("pinSectionId"))&&void 0!==t?t:"";l?n.push(`/pin/${o.id}/repin/${e.id}/?isEditingPin=true&pinBoardId=${d}&pinSectionId=${c}`,{trackingParams:s}):n.push({pathname:`/pin/${o.id}/repin/${e.id}/`},{trackingParams:s})})),Ae(this,"handleClickAddSectionButton",(()=>{var e,i;const{pin:t,history:n,match:{params:{boardId:o}},location:{search:r}}=this.props;if(!o)return;const s=new URLSearchParams(r),a=Boolean(s.get("isEditingPin")),l=null!==(e=s.get("pinBoardId"))&&void 0!==e?e:"",d=null!==(i=s.get("pinSectionId"))&&void 0!==i?i:"";a?n.push(`/pin/${t.id}/repin/${o}/add/?isEditingPin=true&pinBoardId=${l}&pinSectionId=${d}`):n.push({pathname:`/pin/${t.id}/repin/${o}/add/`})})),Ae(this,"handleRepinToExistingSectionSuccess",(()=>this.props.history.go(-2))),Ae(this,"handleRepinToNewSectionSuccess",(()=>this.props.history.go(-3))),Ae(this,"handleRepinCreateBoardButtonTouch",(()=>{(0,M.So)({view_type:21,view_parameter:87,component:7,element:249})})),Ae(this,"renderCreateScreen",(()=>{var e,i,t;const{pin:n,history:o,location:{search:r},match:{params:{boardId:s}}}=this.props,{pinDescription:a,trackingParams:l}=this.state,d=new URLSearchParams(r),h=Boolean(d.get("isEditingPin")),u=null!==(e=d.get("pinBoardId"))&&void 0!==e?e:"",p=null!==(i=d.get("pinSectionId"))&&void 0!==i?i:"",_=null!==(t=d.get("originalPinId"))&&void 0!==t?t:"";return!!s&&(0,c.jsx)(k,{boardId:s,history:o,isEditingPin:h,pinBoardId:u,pinSectionId:p,onSuccess:this.handleRepinToNewSectionSuccess,originalPinId:_,pin:n,pinDescription:a.trim(),trackingParams:l,useRoundedCorners:!0})})),Ae(this,"isFirstBoardCreateActive",(()=>{const{allBoards:e,isFetchingBoards:i,saveToProfileEnabled:t,repinExperience:n}=this.props;return!!f(n,501032)||!i&&0===e.length&&!t})),Ae(this,"isBoardCreateEduActive",(()=>{const{repinExperience:e}=this.props;return f(e,501021)})),Ae(this,"completeBoardCreateEduExperience",(()=>{const{completeExperience:e,repinExperience:i}=this.props;i&&this.isBoardCreateEduActive()&&e(i.placement_id,i.experience_id)})),Ae(this,"renderPicker",(()=>{var e,i,t,n,o;const{allBoards:a,saveToProfileEnabled:l,boardsShortlist:h,history:u,isFetchingBoards:p,location:_,pin:m,match:{params:{boardId:x}},location:{search:f}}=this.props,{pinDescription:b,dupeWarningDismissed:v,saved:y,suggestedBoardName:w,trackingParams:S,warningAnchor:I}=this.state,j=b.trim(),A=m.pinned_to_board,B=A?(0,he.nk)(this.props.i18n._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:A.name}).join(" "):null,{dominant_color:T}=m,k=m.images?m.images["236x"]:null,E=k?k.url:"",C=new URLSearchParams(f),R=Boolean(C.get("isEditingPin")),z=null!==(e=C.get("pinBoardId"))&&void 0!==e?e:"",L=null!==(i=C.get("pinSectionId"))&&void 0!==i?i:"",D=Boolean(C.get("isFromToast")),Z=null!==(t=C.get("originalPinId"))&&void 0!==t?t:"",O=this.props.i18n._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),H=new d.Ry(2),N=this.props.i18n._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),W=this.props.i18n._('Save to board', 'boardPicker.header', 'Title for repin page'),$=x?O:0!==a.length||p||l?W:N;return(0,c.jsxs)(P.default,{hasFixedHeader:!0,children:[(0,c.jsx)(r.Z,{text:$}),(0,c.jsx)(Q.FixedHeader,{useRoundedCorners:!0,zIndex:H,children:(0,c.jsxs)(d.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,c.jsx)(d.xu,{column:2,children:(0,c.jsx)(s.Z,{color:"darkGray",icon:x?"arrow-back":"cancel",onTouch:this.handleBackButtonTouch,alignIconLeft:!0,size:"sm"})}),(0,c.jsx)(d.xu,{column:8,children:(0,c.jsx)(ne.Z,{id:"repin-page-title",children:(0,c.jsx)(d.xv,{align:"center",weight:"bold",children:$})})}),(0,c.jsx)(d.xu,{column:2})]})}),m.images&&(this.isFirstBoardCreateActive()?(0,c.jsx)(Se,{onComplete:this.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=T?T:"",pinImageUrl:null!=E?E:"",savePin:this.handleFirstBoardCreate,selectedBoardName:w}):null),(0,c.jsx)(Be,{children:x?(0,c.jsx)(te,{boardId:x,onSuccess:this.handleRepinToExistingSectionSuccess,pin:m,trackingParams:S,dismissFlyout:this.saved,showSectionRep:!0,history:u,location:_}):(0,c.jsx)(V,{allBoards:a,boardsShortlist:h,saveToProfileEnabled:l,history:u,isFetchingBoards:p,isFirstRepinExperience:this.isFirstBoardCreateActive(),isFromToast:D,location:_,onFirstBoardCreate:this.handleSetSelectedBoard,onSelect:this.handleSelectBoard,originalPinId:Z,closeModal:this.handleBackButtonTouch,pin:m,pinDescription:j,dismissFlyout:this.saved,isEditingPin:R,pinBoardId:z,pinSectionId:L})}),x?(0,c.jsx)(ae.Wx,{onAddNewSection:this.handleClickAddSectionButton,useIconWithBackground:!0}):(0,c.jsx)(se.Z,{modalHeader:(0,F.Bb)(this.props.i18n),nextLocation:`/board/create/${m.id}/`,children:(0,c.jsx)(ee,{isFirstBoardCreateActive:this.isFirstBoardCreateActive(),pin:m,pinDescription:j,trackingParams:S,onTouch:this.handleRepinCreateBoardButtonTouch,useIconWithBackground:!0,isEditingPin:R,pinBoardId:z,pinSectionId:L})}),k&&this.isBoardCreateEduActive()&&(0,c.jsx)(g,{completeExperience:this.completeBoardCreateEduExperience,pinDominantColor:null!=T?T:"",pinImageHeight:null!==(n=k.height)&&void 0!==n?n:1,pinImageWidth:null!==(o=k.width)&&void 0!==o?o:1,pinImageUrl:null!=E?E:""}),I&&!y&&m.pinned_to_board&&!v&&B&&(0,c.jsx)(d.J2,{anchor:I,color:"red",idealDirection:"down",onDismiss:this.handleDismissWarningFlyout,shouldFocus:!1,children:(0,c.jsx)(d.xu,{padding:3,children:(0,c.jsx)(d.xv,{color:"inverse",weight:"bold",children:(0,c.jsx)("span",{children:B})})})})]})}))}componentDidMount(){const{repinExperience:e,triggerExperimentsForPlacement:i,viewExperience:t}=this.props;i(1000153),e&&t(1000153,e.experience_id),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}render(){return(0,c.jsx)(b.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),isOpen:!0,type:"repinPage",closeOnOutsideClick:!1,onDismiss:()=>{},children:(0,c.jsx)(d.xu,{paddingX:2,paddingY:0,height:this.state.windowInnerHeight-de.i_,children:(0,c.jsxs)(A.rs,{children:[(0,c.jsx)(A.AW,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,c.jsx)(A.AW,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,c.jsx)(A.AW,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}const ke=(0,D.compose)(z.Z,(0,o.connect)((({experiences:e})=>({closeupExperience:e[1000112],repinExperience:e[1000153]})),(e=>({completeExperience:(i,t)=>e((0,Ie.CK)(i,t)),triggerExperimentsForPlacement:i=>e((0,Ie.kd)(i)),viewExperience:(i,t)=>e((0,Ie.UT)(i,t))}))))((function(e){var i;const t=(0,A.k6)(),n=(0,A.TH)(),r=(0,A.$B)(),s=null!==(i=r.params.id)&&void 0!==i?i:"",l=(0,a.ZP)(),d=(0,N.Z)(),h=(0,ue.Tt)(),u=(0,oe.Z)(`/pin/${s}/`),p=(e=>((0,q.Z)({name:"PinResource",options:{id:e,field_set_key:"repin"}}),(0,o.useSelector)((({pins:i})=>i[e]))))(s),{isFetching:_,allBoards:g,boardsShortlist:m}=(e=>{const i=(0,o.useSelector)((e=>e.session.userId)),{isFetching:t}=(0,q.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_suggestions:3,user_id:i}});return{isFetching:t,allBoards:(0,o.useSelector)((e=>(0,ce.Is)(e)||[])),boardsShortlist:(0,o.useSelector)((({pins:i})=>i[e]&&i[e].boards_shortlist||[]))}})(s);return(0,re.Z)({name:"UserResource",options:{user_id:null==h?void 0:h.id,field_set_key:"quicksave"}}),u||!!p&&(0,c.jsx)(Te,{...e,createBoard:d,history:t,i18n:l,location:n,match:r,pin:p,allBoards:g,saveToProfileEnabled:null==h?void 0:h.has_quicksave_board,boardsShortlist:m,isFetchingBoards:_})}))},366284:(e,i,t)=>{t.d(i,{G6:()=>r,i7:()=>s,oi:()=>n,u$:()=>o,un:()=>l,vU:()=>a});const n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=e=>{switch(!0){case e.includes("Chrome"):return n.CHROME;case e.includes("Safari"):return n.SAFARI;case e.includes("Firefox"):return n.FIREFOX;case e.includes("Opera"):return n.OPERA;case e.includes("IE"):return n.IE;case e.includes("Edge"):return n.EDGE;default:return n.OTHER}};function r(e){return o(e)===n.SAFARI}function s(e){return o(e)===n.CHROME}function a(e){return o(e)===n.FIREFOX}function l(e){return o(e)===n.EDGE}},56641:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(567831),o=t(867820);function r(e,i){if(i&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){const i=window.open(e,"_blank");return i&&(i.opener=null),i}{const i=(0,n.Z)(e);return setTimeout((()=>{(0,o.My)("setting_new_window_location")}),0),window.location.href=i,window}}},166300:(e,i,t)=>{t.d(i,{Z:()=>l});var n=t(50286),o=t(883119),r=t(444445),s=t(134879),a=t(785893);const l=({children:e,roundedForLargeDevice:i})=>{const t="phone"!==(0,n.ZP)()&&i;return(0,s.V)()?(0,a.jsx)(o.xu,{marginStart:-r.D6,marginEnd:-r.D6,rounding:t?6:void 0,overflow:t?"hidden":void 0,children:(0,a.jsx)(s.C,{value:!1,children:e})}):e}},149230:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(954931);const o=({url:e})=>!(!e||!e.match(/^https{0,1}:\/\//)||(0,n.Z)(e))}},e=>{var i=i=>e(e.s=i);e.O(0,[97270,83119,69254,42888,26067,55304,50558,8285,3278,82020,70598,87072,54246,54556,58589,1313,30138],(()=>(i(309209),i(178973),i(158765),i(473580))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/repin-mobile-c2e81430fd274e28.mjs.map